<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Revisting NBA Career Predictions From Rookie Performance...again &mdash; Dan Vatterott</title>
  <meta name="author" content="Dan Vatterott">






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="/favicon.png" rel="icon">

  <link href="/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="/">Dan Vatterott</a></h1>
    <h2>Data Scientist</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
    <li><a href="/">Home</a></li>
    <li><a href="/about-me.html">About Me</a></li>
    <li><a href="/publications.html">Publications</a></li>
    <li><a href="/Vatterott_Resume.pdf">Resume</a></li>
    <li><a href="/my-reads.html">My Reads</a></li>
    <li><a href="/presentations.html">Presentations</a></li>
    <li><a href="/blog.html">Blog</a></li>
    <li><a href="/archives.html">Archive</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Revisting NBA Career Predictions From Rookie Performance...again</h1>
    <p class="meta">
<time datetime="2016-07-31T21:59:41-04:00" pubdate>Sun 31 July 2016</time>    </p>
</header>

  <div class="entry-content"><p>Now that the NBA season is done, we have complete data from this year's NBA rookies. In the past I have tried to predict NBA rookies' future performance using <a href="http://www.danvatterott.com/predicting-career-performance-from-rookie-performance.html">regression</a> <a href="http://www.danvatterott.com/revisiting-nba-career-predictions-from-rookie-performance.html">models</a>. In this post I am again trying to predict rookies' future performance, but now using using a <a href="https://en.wikipedia.org/wiki/Statistical_classification">classification approach</a>. When using a classification approach, I predict whether player X will be a "great," "average," or "poor" player rather than predicting exactly how productive player X will be.</p>
<p>Much of this post re-uses code from the previous posts, so I skim over some of the repeated code. </p>
<p>As usual, I will post all code as a jupyter notebook on my <a href="https://github.com/dvatterott/jupyter_notebooks">github</a>.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1">#import some libraries and tell ipython we want inline figures rather than interactive figures. </span>
<span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span><span class="o">,</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span><span class="o">,</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span><span class="o">,</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mpl</span>

<span class="w"> </span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">print_function</span>

<span class="w"> </span><span class="o">%</span><span class="n">matplotlib</span><span class="w"> </span><span class="n">inline</span>
<span class="w"> </span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span><span class="w"> </span><span class="c1">#im addicted to ggplot. so pretty.</span>
</code></pre></div>

<p>Load the data. Reminder - this data is available on my <a href="https://github.com/dvatterott/nba_project">github</a>.</p>
<div class="highlight"><pre><span></span><code> rookie_df = pd.read_pickle(&#39;nba_bballref_rookie_stats_2016_Apr_16.pkl&#39;) #here&#39;s the rookie year data

 rook_games = rookie_df[&#39;Career Games&#39;]&gt;50 #only attempting to predict players that have played at least 50 games
 rook_year = rookie_df[&#39;Year&#39;]&gt;1980 #only attempting to predict players from after 1980

 #remove rookies from before 1980 and who have played less than 50 games. I also remove some features that seem irrelevant or unfair
 rookie_df_games = rookie_df[rook_games &amp; rook_year] #only players with more than 50 games. 
 rookie_df_drop = rookie_df_games.drop([&#39;Year&#39;,&#39;Career Games&#39;,&#39;Name&#39;],1)
</code></pre></div>

<p>Load more data, and normalize the data for the <a href="https://en.wikipedia.org/wiki/Principal_component_analysis">PCA transformation</a>. </p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">StandardScaler</span>

<span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;nba_bballref_career_stats_2016_Apr_15.pkl&#39;</span><span class="p">)</span>
<span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">50</span><span class="p">]</span>
<span class="w"> </span><span class="n">df_drop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span><span class="s1">&#39;G&#39;</span><span class="p">,</span><span class="s1">&#39;GS&#39;</span><span class="p">,</span><span class="s1">&#39;MP&#39;</span><span class="p">,</span><span class="s1">&#39;FG&#39;</span><span class="p">,</span><span class="s1">&#39;FGA&#39;</span><span class="p">,</span><span class="s1">&#39;FG%&#39;</span><span class="p">,</span><span class="s1">&#39;3P&#39;</span><span class="p">,</span><span class="s1">&#39;2P&#39;</span><span class="p">,</span><span class="s1">&#39;FT&#39;</span><span class="p">,</span><span class="s1">&#39;TRB&#39;</span><span class="p">,</span><span class="s1">&#39;PTS&#39;</span><span class="p">,</span><span class="s1">&#39;ORtg&#39;</span><span class="p">,</span><span class="s1">&#39;DRtg&#39;</span><span class="p">,</span><span class="s1">&#39;PER&#39;</span><span class="p">,</span><span class="s1">&#39;TS%&#39;</span><span class="p">,</span><span class="s1">&#39;3PAr&#39;</span><span class="p">,</span><span class="s1">&#39;FTr&#39;</span><span class="p">,</span><span class="s1">&#39;ORB%&#39;</span><span class="p">,</span><span class="s1">&#39;DRB%&#39;</span><span class="p">,</span><span class="s1">&#39;TRB%&#39;</span><span class="p">,</span><span class="s1">&#39;AST%&#39;</span><span class="p">,</span><span class="s1">&#39;STL%&#39;</span><span class="p">,</span><span class="s1">&#39;BLK%&#39;</span><span class="p">,</span><span class="s1">&#39;TOV%&#39;</span><span class="p">,</span><span class="s1">&#39;USG%&#39;</span><span class="p">,</span><span class="s1">&#39;OWS&#39;</span><span class="p">,</span><span class="s1">&#39;DWS&#39;</span><span class="p">,</span><span class="s1">&#39;WS&#39;</span><span class="p">,</span><span class="s1">&#39;WS/48&#39;</span><span class="p">,</span><span class="s1">&#39;OBPM&#39;</span><span class="p">,</span><span class="s1">&#39;DBPM&#39;</span><span class="p">,</span><span class="s1">&#39;BPM&#39;</span><span class="p">,</span><span class="s1">&#39;VORP&#39;</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
<span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_drop</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span><span class="w"> </span><span class="c1">#take data out of dataframe</span>
<span class="w"> </span><span class="n">ScaleModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StandardScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="c1">#make sure each feature has 0 mean and unit variance. </span>
<span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ScaleModel</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div>

<p>In the past I used <a href="https://en.wikipedia.org/wiki/K-means_clustering">k-means</a> to group players according to their performance (see my post on <a href="http://www.danvatterott.com/blog/2016/02/21/grouping-nba-players/">grouping players</a> for more info). Here, I use a <a href="https://en.wikipedia.org/wiki/Mixture_model">gaussian mixture model</a> (GMM) to group the players. I use the GMM model because it assigns each player a "soft" label rather than a "hard" label. By soft label I mean that a player simultaneously belongs to several groups. For instance, Russell Westbrook belongs to both my "point guard" group and my "scorers" group. K-means uses hard labels where each player can only belong to one group. I think the GMM model provides a more accurate representation of players, so I've decided to use it in this post. Maybe in a future post I will spend more time describing it. </p>
<p>For anyone wondering, the GMM groupings looked pretty similar to the k-means groupings. </p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.mixture</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">GMM</span>
<span class="w"> </span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.decomposition</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">PCA</span>

<span class="w"> </span><span class="n">reduced_model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">whiten</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="w"> </span><span class="n">reduced_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reduced_model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="c1">#transform data into the 5 PCA components space</span>

<span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GMM</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">reduced_data</span><span class="p">)</span><span class="w"> </span><span class="c1">#6 clusters. like the k-means model</span>
<span class="w"> </span><span class="n">new_labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">reduced_data</span><span class="p">)</span>

<span class="w"> </span><span class="n">predictions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">reduced_data</span><span class="p">)</span><span class="w"> </span><span class="c1">#generate values describing &quot;how much&quot; each player belongs to each group </span>
<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_labels</span><span class="p">):</span>
<span class="w">     </span><span class="n">Label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Category</span><span class="si">%d</span><span class="s1">&#39;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">x</span><span class="w"> </span>
<span class="w">     </span><span class="n">df</span><span class="p">[</span><span class="n">Label</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">predictions</span><span class="p">[:,</span><span class="n">x</span><span class="p">]</span>
</code></pre></div>

<p>In this past I have attempted to predict win shares per 48 minutes. I am using win shares as a dependent variable again, but I want to categorize players. </p>
<p>Below I create a histogram of players' win shares per 48. </p>
<p>I split players into 4 groups which I will refer to as "bad," "below average," "above average," and "great": Poor players are the bottom 10% in win shares per 48, Below average are the 10-50th percentiles, Above average and 50-90th percentiles, Great are the top 10%. This assignment scheme is relatively arbitrary; the model performs similarly with different assignment schemes. </p>
<div class="highlight"><pre><span></span><code> plt.hist(df[&#39;WS/48&#39;]);
 df[&#39;perf_cat&#39;] = 0
 df.loc[df[&#39;WS/48&#39;] &lt; np.percentile(df[&#39;WS/48&#39;],10),&#39;perf_cat&#39;] = 1 #category 1 players are bottom 10%
 df.loc[(df[&#39;WS/48&#39;] &lt; np.percentile(df[&#39;WS/48&#39;],50)) &amp; (df[&#39;WS/48&#39;] &gt;= np.percentile(df[&#39;WS/48&#39;],10)),&#39;perf_cat&#39;] = 2
 df.loc[(df[&#39;WS/48&#39;] &lt; np.percentile(df[&#39;WS/48&#39;],90)) &amp; (df[&#39;WS/48&#39;] &gt;= np.percentile(df[&#39;WS/48&#39;],50)),&#39;perf_cat&#39;] = 3
 df.loc[df[&#39;WS/48&#39;] &gt;= np.percentile(df[&#39;WS/48&#39;],90),&#39;perf_cat&#39;] = 4 #category 4 players are top 10%
 perc_in_cat = [np.mean(df[&#39;perf_cat&#39;]==x) for x in np.unique(df[&#39;perf_cat&#39;])];
 perc_in_cat #print % of palyers in each category as a sanity check




[0.096314496314496317,
 0.40196560196560199,
 0.39950859950859952,
 0.10221130221130222]
</code></pre></div>

<p><img src="/images/classificationNBA/histogram.png" /></p>
<p>My goal is to use rookie year performance to classify players into these 4 categories. I have a big matrix with lots of data about rookie year performance, but the reason that I grouped player using the GMM is because I suspect that players in the different groups have different "paths" to success. I am including the groupings in my classification model and computing interaction terms. The interaction terms will allow rookie performance to produce different predictions for the different groups. </p>
<p>By including interaction terms, I include quite a few predictor features. I've printed the number of predictor features and the number of predicted players below. </p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">preprocessing</span>

<span class="w"> </span><span class="n">df_drop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1980</span><span class="p">]</span>
<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_labels</span><span class="p">):</span>
<span class="w">     </span><span class="n">Label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Category</span><span class="si">%d</span><span class="s1">&#39;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">x</span><span class="w"> </span>
<span class="w">     </span><span class="n">rookie_df_drop</span><span class="p">[</span><span class="n">Label</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_drop</span><span class="p">[</span><span class="n">Label</span><span class="p">]</span><span class="w"> </span><span class="c1">#give rookies the groupings produced by the GMM model</span>

<span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rookie_df_drop</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span><span class="w"> </span><span class="c1">#take data out of dataframe</span>

<span class="w"> </span><span class="n">poly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">preprocessing</span><span class="o">.</span><span class="n">PolynomialFeatures</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">interaction_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="w"> </span><span class="c1">#create interaction terms.</span>
<span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poly</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="w"> </span><span class="n">Career_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1980</span><span class="p">]</span>
<span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Career_data</span><span class="p">[</span><span class="s1">&#39;perf_cat&#39;</span><span class="p">]</span><span class="w"> </span><span class="c1">#get predictor data</span>
<span class="w"> </span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">X</span><span class="p">))</span>
<span class="w"> </span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">Y</span><span class="p">))</span>

<span class="p">(</span><span class="mi">1703</span><span class="p">,</span><span class="w"> </span><span class="mi">1432</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1703</span><span class="p">,)</span>
</code></pre></div>

<p>Now that I have all the features, it's time to try and predict which players will be poor, below average, above average, and great. To create these predictions, I will use a <a href="https://en.wikipedia.org/wiki/Logistic_regression">logistic regression model</a>. </p>
<p>Because I have so many predictors, correlation between predicting features and over-fitting the data are major concerns. I use <a href="http://stats.stackexchange.com/questions/4272/when-to-use-regularization-methods-for-regression">regularization</a> and <a href="https://en.wikipedia.org/wiki/Cross-validation_(statistics)">cross-validation</a> to combat these issues. </p>
<p>Specifically, I am using <a href="https://en.wikipedia.org/wiki/Tikhonov_regularization">l2 regularization</a> and k-fold 5 cross-validation. Within the cross-validation, I am trying to estimate how much regularization is appropriate. </p>
<p>Some important notes - I am using "balanced" weights which tells the model that worse to incorrectly predict the poor and great players than the below average and above average players. I do this because I don't want the model to completely ignore the less frequent classifications. Second, I use the multi_class multinomial because it limits the number of models I have to fit. </p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">linear_model</span>
<span class="w"> </span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">accuracy_score</span>

<span class="w"> </span><span class="n">logreg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">linear_model</span><span class="o">.</span><span class="n">LogisticRegressionCV</span><span class="p">(</span><span class="n">Cs</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0008</span><span class="p">],</span><span class="w"> </span><span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">penalty</span><span class="o">=</span><span class="s1">&#39;l2&#39;</span><span class="p">,</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">class_weight</span><span class="o">=</span><span class="s1">&#39;balanced&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">                                            </span><span class="n">max_iter</span><span class="o">=</span><span class="mi">15000</span><span class="p">,</span><span class="w"> </span><span class="n">multi_class</span><span class="o">=</span><span class="s1">&#39;multinomial&#39;</span><span class="p">)</span>

<span class="w"> </span><span class="n">est</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logreg</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="p">)</span>
<span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="n">est</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">))</span><span class="w"> </span><span class="c1">#calculate the % correct </span>
<span class="w"> </span><span class="nb">print</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>

<span class="mf">0.738109219025</span>
</code></pre></div>

<p>Okay, the model did pretty well, but lets look at where the errors are coming from. To visualize the models accuracy, I am using a <a href="https://en.wikipedia.org/wiki/Confusion_matrix">confusion matrix</a>. In a confusion matrix, every item on the diagnonal is a correctly classified item. Every item off the diagonal is incorrectly classified. The color bar's axis is the percent correct. So the dark blue squares represent cells with more items. </p>
<p>It seems the model is best at predicting poor players and great players. It makes more errors when trying to predict the more average players. </p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">confusion_matrix</span>
<span class="w"> </span><span class="n">cm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">confusion_matrix</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="w"> </span><span class="n">est</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">))</span>

<span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">plot_confusion_matrix</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Confusion matrix&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">Blues</span><span class="p">):</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span><span class="w"> </span><span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="w">     </span><span class="n">tick_marks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;perf_cat&#39;</span><span class="p">])))</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">tick_marks</span><span class="p">,</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;perf_cat&#39;</span><span class="p">]))</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">tick_marks</span><span class="p">,</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;perf_cat&#39;</span><span class="p">]))</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;True label&#39;</span><span class="p">)</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Predicted label&#39;</span><span class="p">)</span>

<span class="w"> </span><span class="n">cm_normalized</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cm</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">cm</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="w"> </span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">cm_normalized</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Normalized confusion matrix&#39;</span><span class="p">)</span>
</code></pre></div>

<p><img src="/images/classificationNBA/confusion_mat.png" /></p>
<p>Lets look at what the model predicts for this year's rookies. Below I modified two functions that I wrote for a previous post. The first function finds a particular year's draft picks. The second function produces predictions for each draft pick.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">gather_draftData</span><span class="p">(</span><span class="n">Year</span><span class="p">):</span>

<span class="w">     </span><span class="kn">import</span><span class="w"> </span><span class="nn">urllib2</span>
<span class="w">     </span><span class="kn">from</span><span class="w"> </span><span class="nn">bs4</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">BeautifulSoup</span>
<span class="w">     </span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="w">     </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="w">     </span><span class="n">draft_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span>

<span class="w">     </span><span class="k">def</span><span class="w"> </span><span class="nf">convert_float</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
<span class="w">         </span><span class="k">try</span><span class="p">:</span>
<span class="w">             </span><span class="k">return</span><span class="w"> </span><span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="w">         </span><span class="k">except</span><span class="w"> </span><span class="n">ValueError</span><span class="p">:</span>
<span class="w">             </span><span class="k">return</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="w">     </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://www.basketball-reference.com/draft/NBA_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Year</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.html&#39;</span>
<span class="w">     </span><span class="n">html</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="w">     </span><span class="n">soup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span><span class="s2">&quot;lxml&quot;</span><span class="p">)</span>

<span class="w">     </span><span class="n">draft_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;tbody&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">range</span><span class="p">(</span><span class="n">draft_len</span><span class="p">)]</span>
<span class="w">     </span><span class="n">draft_nam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;tbody&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">range</span><span class="p">(</span><span class="n">draft_len</span><span class="p">)]</span>

<span class="w">     </span><span class="n">draft_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">draft_num</span><span class="p">,</span><span class="n">draft_nam</span><span class="p">])</span><span class="o">.</span><span class="n">T</span>
<span class="w">     </span><span class="n">draft_df</span><span class="o">.</span><span class="n">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;Number&#39;</span><span class="p">,</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span>
<span class="w">     </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">range</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">draft_df</span>

<span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">player_prediction__regressionModel</span><span class="p">(</span><span class="n">PlayerName</span><span class="p">):</span>

<span class="w">     </span><span class="n">clust_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;nba_bballref_career_stats_2016_Apr_15.pkl&#39;</span><span class="p">)</span>
<span class="w">     </span><span class="n">clust_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clust_df</span><span class="p">[</span><span class="n">clust_df</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">PlayerName</span><span class="p">]</span>
<span class="w">     </span><span class="n">clust_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clust_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span><span class="s1">&#39;G&#39;</span><span class="p">,</span><span class="s1">&#39;GS&#39;</span><span class="p">,</span><span class="s1">&#39;MP&#39;</span><span class="p">,</span><span class="s1">&#39;FG&#39;</span><span class="p">,</span><span class="s1">&#39;FGA&#39;</span><span class="p">,</span><span class="s1">&#39;FG%&#39;</span><span class="p">,</span><span class="s1">&#39;3P&#39;</span><span class="p">,</span><span class="s1">&#39;2P&#39;</span><span class="p">,</span><span class="s1">&#39;FT&#39;</span><span class="p">,</span><span class="s1">&#39;TRB&#39;</span><span class="p">,</span><span class="s1">&#39;PTS&#39;</span><span class="p">,</span><span class="s1">&#39;ORtg&#39;</span><span class="p">,</span><span class="s1">&#39;DRtg&#39;</span><span class="p">,</span><span class="s1">&#39;PER&#39;</span><span class="p">,</span><span class="s1">&#39;TS%&#39;</span><span class="p">,</span><span class="s1">&#39;3PAr&#39;</span><span class="p">,</span><span class="s1">&#39;FTr&#39;</span><span class="p">,</span><span class="s1">&#39;ORB%&#39;</span><span class="p">,</span><span class="s1">&#39;DRB%&#39;</span><span class="p">,</span><span class="s1">&#39;TRB%&#39;</span><span class="p">,</span><span class="s1">&#39;AST%&#39;</span><span class="p">,</span><span class="s1">&#39;STL%&#39;</span><span class="p">,</span><span class="s1">&#39;BLK%&#39;</span><span class="p">,</span><span class="s1">&#39;TOV%&#39;</span><span class="p">,</span><span class="s1">&#39;USG%&#39;</span><span class="p">,</span><span class="s1">&#39;OWS&#39;</span><span class="p">,</span><span class="s1">&#39;DWS&#39;</span><span class="p">,</span><span class="s1">&#39;WS&#39;</span><span class="p">,</span><span class="s1">&#39;WS/48&#39;</span><span class="p">,</span><span class="s1">&#39;OBPM&#39;</span><span class="p">,</span><span class="s1">&#39;DBPM&#39;</span><span class="p">,</span><span class="s1">&#39;BPM&#39;</span><span class="p">,</span><span class="s1">&#39;VORP&#39;</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
<span class="w">     </span><span class="n">new_vect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ScaleModel</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">clust_df</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="w">     </span><span class="n">reduced_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reduced_model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">new_vect</span><span class="p">)</span>
<span class="w">     </span><span class="n">predictions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">reduced_data</span><span class="p">)</span>
<span class="w">     </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_labels</span><span class="p">):</span>
<span class="w">         </span><span class="n">Label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Category</span><span class="si">%d</span><span class="s1">&#39;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">x</span><span class="w"> </span>
<span class="w">         </span><span class="n">clust_df</span><span class="p">[</span><span class="n">Label</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">predictions</span><span class="p">[:,</span><span class="n">x</span><span class="p">]</span>

<span class="w">     </span><span class="n">Predrookie_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;nba_bballref_rookie_stats_2016_Apr_16.pkl&#39;</span><span class="p">)</span>
<span class="w">     </span><span class="n">Predrookie_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Predrookie_df</span><span class="p">[</span><span class="n">Predrookie_df</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">PlayerName</span><span class="p">]</span>
<span class="w">     </span><span class="n">Predrookie_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Predrookie_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="s1">&#39;Career Games&#39;</span><span class="p">,</span><span class="s1">&#39;Name&#39;</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
<span class="w">     </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_labels</span><span class="p">):</span>
<span class="w">         </span><span class="n">Label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Category</span><span class="si">%d</span><span class="s1">&#39;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">x</span><span class="w"> </span>
<span class="w">         </span><span class="n">Predrookie_df</span><span class="p">[</span><span class="n">Label</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clust_df</span><span class="p">[</span><span class="n">Label</span><span class="p">]</span><span class="w"> </span><span class="c1">#give rookies the groupings produced by the GMM model</span>
<span class="w">     </span><span class="n">predX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Predrookie_df</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span><span class="w"> </span><span class="c1">#take data out of dataframe</span>
<span class="w">     </span><span class="n">predX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poly</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">predX</span><span class="p">)</span>
<span class="w">     </span><span class="n">predictions2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">est</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">predX</span><span class="p">)</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;Name&#39;</span><span class="p">:</span><span class="n">PlayerName</span><span class="p">,</span><span class="s1">&#39;Group&#39;</span><span class="p">:</span><span class="n">predictions</span><span class="p">,</span><span class="s1">&#39;Prediction&#39;</span><span class="p">:</span><span class="n">predictions2</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
</code></pre></div>

<p>Below I create a plot depicting the model's predictions. On the y-axis are the four classifications. On the x-axis are the players from the 2015 draft. Each cell in the plot is the probability of a player belonging to one of the classifications. Again, dark blue means a cell or more likely. Good news for us T-Wolves fans! The model loves KAT. </p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="n">draft_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gather_draftData</span><span class="p">(</span><span class="mh">2015</span><span class="p">)</span>

<span class="w"> </span><span class="n">draft_df</span><span class="p">[&#39;</span><span class="n">Name</span><span class="p">&#39;][</span><span class="mh">14</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="p">&#39;</span><span class="n">Kelly</span><span class="w"> </span><span class="n">Oubre</span><span class="w"> </span><span class="n">Jr</span><span class="p">.&#39;</span><span class="w"> </span><span class="p">#</span><span class="n">annoying</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">inconsistencies</span>

<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mh">14</span><span class="p">,</span><span class="mh">6</span><span class="p">));</span>

<span class="w"> </span><span class="n">draft_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">draft_df</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="mh">25</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">)</span><span class="w"> </span><span class="p">#</span><span class="n">spurs</span><span class="p">&#39;</span><span class="w"> </span><span class="mh">1</span><span class="n">st</span><span class="w"> </span><span class="n">round</span><span class="w"> </span><span class="n">pick</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">played</span><span class="w"> </span><span class="n">yet</span>

<span class="w"> </span><span class="n">predictions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">draft_df</span><span class="p">[&#39;</span><span class="n">Name</span><span class="p">&#39;]</span><span class="o">:</span>
<span class="w">     </span><span class="n">draft_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">draft_df</span><span class="p">[</span><span class="n">draft_df</span><span class="p">[&#39;</span><span class="n">Name</span><span class="p">&#39;]</span><span class="o">==</span><span class="n">name</span><span class="p">][&#39;</span><span class="n">Number</span><span class="p">&#39;]</span>
<span class="w">     </span><span class="n">predict_dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">player_prediction__regressionModel</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="w">     </span><span class="n">predictions</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">predict_dict</span><span class="p">[&#39;</span><span class="n">Prediction</span><span class="p">&#39;])</span>

<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">predictions</span><span class="p">).</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">interpolation</span><span class="o">=</span><span class="p">&#39;</span><span class="n">nearest</span><span class="p">&#39;,</span><span class="w"> </span><span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="p">.</span><span class="n">cm</span><span class="p">.</span><span class="n">Blues</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(&#39;</span><span class="n">Predicting</span><span class="w"> </span><span class="n">Future</span><span class="w"> </span><span class="n">Performance</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mh">2015</span><span class="o">-</span><span class="mh">16</span><span class="w"> </span><span class="n">Rookies</span><span class="p">&#39;)</span>
<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">shrink</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
<span class="w"> </span><span class="n">tick_marks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[&#39;</span><span class="n">perf_cat</span><span class="p">&#39;])))</span>
<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="mh">0</span><span class="p">,</span><span class="mh">29</span><span class="p">),</span><span class="n">draft_df</span><span class="p">[&#39;</span><span class="n">Name</span><span class="p">&#39;],</span><span class="n">rotation</span><span class="o">=</span><span class="mh">90</span><span class="p">)</span>
<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="mh">0</span><span class="p">,</span><span class="mh">4</span><span class="p">),</span><span class="w"> </span><span class="p">[&#39;</span><span class="n">Poor</span><span class="sc">&#39;,&#39;</span><span class="n">Below</span><span class="w"> </span><span class="n">Average</span><span class="sc">&#39;,&#39;</span><span class="n">Above</span><span class="w"> </span><span class="n">Average</span><span class="sc">&#39;,&#39;</span><span class="n">Great</span><span class="p">&#39;])</span>
<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(&#39;</span><span class="n">Prediction</span><span class="p">&#39;)</span>
<span class="w"> </span><span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(&#39;</span><span class="n">Draft</span><span class="w"> </span><span class="n">Position</span><span class="p">&#39;);</span>
</code></pre></div>

<p><img src="/images/classificationNBA/predictions.png" /></p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Dan Vatterott
    </span>
  </span>
<time datetime="2016-07-31T21:59:41-04:00" pubdate>Sun 31 July 2016</time>  <span class="categories">
    <a class='category' href='/category/nba.html'>nba</a>
  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">


<!-- <section> -->
    <section style="max-width: fit-content; margin-inline: auto;">

            <span class="fa-stack fa-lg">
                <a href="mailto:dvatterott@gmail.com"><i class="fa fa-envelope fa-1x"></i></a>
            </span>
            <span class="fa-stack fa-lg">
                <a href="http://www.linkedin.com/in/dan-vatterott"><i class="fa fa-linkedin fa-1x"></i></a>
            </span>

            <span class="fa-stack fa-lg">
                <a href="https://twitter.com/dvatterott"><i class="fa fa-twitter fa-1x"></i></a>
            </span>

            <span class="fa-stack fa-lg">
                <a href="https://github.com/dvatterott"><i class="fa fa-github fa-1x"></i></a>
            </span>
            <span class="fa-stack fa-lg">
                <a href="https://scholar.google.com/citations?hl=en&user=-S7mhDQAAAAJ&hl"><i class="fa fa-graduation-cap fa-1x"></i></a>
            </span>

            <!-- <h1>Social</h1>
                 <ul>
                 <li><a href="dvatterott@gmail.com" target="_blank">email</a></li>
                 <li><a href="http://www.linkedin.com/in/dan-vatterott" target="_blank">linkedin</a></li>
                 <li><a href="https://twitter.com/dvatterott" target="_blank">twitter</a></li>
                 <li><a href="https://github.com/dvatterott" target="_blank">github</a></li>
                 <li><a href="https://scholar.google.com/citations?hl=en&user=-S7mhDQAAAAJ&hl" target="_blank">google-scholar</a></li>


                 </ul> -->
    </section>


  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="/modeling-the-relative-speed-of-hot-wheels-cars.html">Modeling the relative speed of Hot Wheels Cars</a>
      </li>
      <li class="post">
          <a href="/data-onboarding-checklist.html">Data Onboarding Checklist</a>
      </li>
      <li class="post">
          <a href="/posting-collections-as-hive-tables.html">Posting Collections as Hive Tables</a>
      </li>
      <li class="post">
          <a href="/balancing-model-weights-in-pyspark.html">Balancing Model Weights in PySpark</a>
      </li>
      <li class="post">
          <a href="/creating-a-cdf-in-pyspark.html">Creating a CDF in PySpark</a>
      </li>
    </ul>
  </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2015&ndash;2025  Dan Vatterott &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="/theme/js/modernizr-2.0.js"></script>
  <script src="/theme/js/ender.js"></script>
  <script src="/theme/js/octopress.js" type="text/javascript"></script>
  <script type="text/javascript">
    var disqus_shortname = 'danvatterott';
    var disqus_identifier = '/revisting-nba-career-predictions-from-rookie-performanceagain.html';
    var disqus_url = '/revisting-nba-career-predictions-from-rookie-performanceagain.html';
    var disqus_title = 'Revisting NBA Career Predictions From Rookie Performance...again';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
</body>
</html>