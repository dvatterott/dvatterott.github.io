<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>NBA Shot Charts: Updated &mdash; Dan Vatterott</title>
  <meta name="author" content="Dan Vatterott">






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://danvatterott.com/favicon.png" rel="icon">

  <link href="https://danvatterott.com/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://danvatterott.com/">Dan Vatterott</a></h1>
    <h2>Data Scientist</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
    <li><a href="/">Home</a></li>
    <li><a href="/about-me.html">About Me</a></li>
    <li><a href="/publications.html">Publications</a></li>
    <li><a href="/Vatterott_Resume.pdf">Resume</a></li>
    <li><a href="/my-reads.html">My Reads</a></li>
    <li><a href="/presentations.html">Presentations</a></li>
    <li><a href="/blog.html">Blog</a></li>
    <li><a href="/archives.html">Archive</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">NBA Shot Charts: Updated</h1>
    <p class="meta">
<time datetime="2016-05-13T11:08:22-04:00" pubdate>Fri 13 May 2016</time>    </p>
</header>

  <div class="entry-content"><p>For some reason I recently got it in my head that I wanted to go back and create more NBA shot charts. <a href="http://www.danvatterott.com/blog/2015/12/22/creating-nba-shot-charts/">My previous shotcharts</a> used colored circles to depict the frequency and effectiveness of shots at different locations. This is an extremely efficient method of representing shooting profiles, but I thought it would be fun to create shot charts that represent a player's shooting profile continously across the court rather than in discrete hexagons.</p>
<p>By depicting the shooting data continously, I lose the ability to represent one dimenion - I can no longer use the size of circles to depict shot frequency at a location. Nonetheless, I thought it would be fun to create these charts.</p>
<p>I explain how to create them below. I've also included the ability to compare a player's shooting performance to the league average.</p>
<p>In my previous shot charts, I query nba.com's API when creating a players shot chart, but querying nba.com's API for every shot taken in 2015-16 takes a little while (for computing league average), so I've uploaded this data to <a href="https://github.com/dvatterott/nba_project">my github</a> and call the league data as a file rather than querying nba.com API.</p>
<p>This code is also available as a jupyter notebook on <a href="https://github.com/dvatterott/jupyter_notebooks">my github</a>.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1">#import some libraries and tell ipython we want inline figures rather than interactive figures.</span>
<span class="w"> </span><span class="o">%</span><span class="n">matplotlib</span><span class="w"> </span><span class="n">inline</span>
<span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span><span class="o">,</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span><span class="o">,</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span><span class="o">,</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mpl</span>
</code></pre></div>

<p>Here, I create a function for querying shooting data from NBA.com's API. This is the same function I used in my previous post regarding shot charts.</p>
<p>You can find a player's ID number by going to the players nba.com page and looking at the page address. There is <a href="https://github.com/seemethere/nba_py">a python library</a> that you can use for querying player IDs (and other data from the nba.com API), but I've found this library to be a little shaky.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">aqcuire_shootingData</span><span class="p">(</span><span class="n">PlayerID</span><span class="p">,</span><span class="n">Season</span><span class="p">):</span>
<span class="w">     </span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="w">     </span><span class="n">header_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">#I pulled this header from the py goldsberry library</span>
<span class="w">         </span><span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;gzip, deflate, sdch&#39;</span><span class="p">,</span>
<span class="w">         </span><span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;en-US,en;q=0.8&#39;</span><span class="p">,</span>
<span class="w">         </span><span class="s1">&#39;Upgrade-Insecure-Requests&#39;</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
<span class="w">         </span><span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Mozilla/5.0 (Windows NT 10.0; WOW64)&#39;</span><span class="w">\</span>
<span class="w">         </span><span class="s1">&#39; AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.82 &#39;</span><span class="w">\</span>
<span class="w">         </span><span class="s1">&#39;Safari/537.36&#39;</span><span class="p">,</span>
<span class="w">         </span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;text/html,application/xhtml+xml,application/xml;q=0.9&#39;</span><span class="w">\</span>
<span class="w">         </span><span class="s1">&#39;,image/webp,*/*;q=0.8&#39;</span><span class="p">,</span>
<span class="w">         </span><span class="s1">&#39;Cache-Control&#39;</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;max-age=0&#39;</span><span class="p">,</span>
<span class="w">         </span><span class="s1">&#39;Connection&#39;</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;keep-alive&#39;</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">     </span><span class="n">shot_chart_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://stats.nba.com/stats/shotchartdetail?CFID=33&amp;CFPARAMS=&#39;</span><span class="o">+</span><span class="n">Season</span><span class="o">+</span><span class="s1">&#39;&amp;ContextFilter=&#39;</span><span class="w">\</span>
<span class="w">                     </span><span class="s1">&#39;&amp;ContextMeasure=FGA&amp;DateFrom=&amp;DateTo=&amp;GameID=&amp;GameSegment=&amp;LastNGames=0&amp;LeagueID=&#39;</span><span class="w">\</span>
<span class="w">                     </span><span class="s1">&#39;00&amp;Location=&amp;MeasureType=Base&amp;Month=0&amp;OpponentTeamID=0&amp;Outcome=&amp;PaceAdjust=&#39;</span><span class="w">\</span>
<span class="w">                     </span><span class="s1">&#39;N&amp;PerMode=PerGame&amp;Period=0&amp;PlayerID=&#39;</span><span class="o">+</span><span class="n">PlayerID</span><span class="o">+</span><span class="s1">&#39;&amp;PlusMinus=N&amp;Position=&amp;Rank=&#39;</span><span class="w">\</span>
<span class="w">                     </span><span class="s1">&#39;N&amp;RookieYear=&amp;Season=&#39;</span><span class="o">+</span><span class="n">Season</span><span class="o">+</span><span class="s1">&#39;&amp;SeasonSegment=&amp;SeasonType=Regular+Season&amp;TeamID=&#39;</span><span class="w">\</span>
<span class="w">                     </span><span class="s1">&#39;0&amp;VsConference=&amp;VsDivision=&amp;mode=Advanced&amp;showDetails=0&amp;showShots=1&amp;showZones=0&#39;</span>
<span class="w">     </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">shot_chart_url</span><span class="p">,</span><span class="n">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">header_data</span><span class="p">)</span>
<span class="w">     </span><span class="n">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;resultSets&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;headers&#39;</span><span class="p">]</span>
<span class="w">     </span><span class="n">shots</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;resultSets&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;rowSet&#39;</span><span class="p">]</span>
<span class="w">     </span><span class="n">shot_df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span><span class="w"> </span><span class="n">columns</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">shot_df</span>
</code></pre></div>

<p>Create a function for drawing the nba court. This function was taken directly from <a href="http://savvastjortjoglou.com/nba-shot-sharts.html">Savvas Tjortjoglou's post on shot charts</a>.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">draw_court</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">outer_lines</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">     </span><span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.patches</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">Circle</span><span class="p">,</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">,</span><span class="w"> </span><span class="n">Arc</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="n">ax</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="p">:</span>
<span class="w">         </span><span class="n">ax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="w">     </span><span class="n">hoop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Circle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">radius</span><span class="o">=</span><span class="mf">7.5</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="w">     </span><span class="n">backboard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">((</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">7.5</span><span class="p">),</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="w">     </span><span class="n">outer_box</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">((</span><span class="o">-</span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">47.5</span><span class="p">),</span><span class="w"> </span><span class="mi">160</span><span class="p">,</span><span class="w"> </span><span class="mi">190</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
<span class="w">                           </span><span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="w">     </span><span class="n">inner_box</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">((</span><span class="o">-</span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">47.5</span><span class="p">),</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">190</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
<span class="w">                           </span><span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="w">     </span><span class="n">top_free_throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">142.5</span><span class="p">),</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="n">theta1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">theta2</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span>
<span class="w">                          </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="w">     </span><span class="n">bottom_free_throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">142.5</span><span class="p">),</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="n">theta1</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span><span class="w"> </span><span class="n">theta2</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="w">                             </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="w">     </span><span class="n">restricted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="n">theta1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">theta2</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span>
<span class="w">                      </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="w">     </span><span class="n">corner_three_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">((</span><span class="o">-</span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">47.5</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span>
<span class="w">                                </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="w">     </span><span class="n">corner_three_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">((</span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">47.5</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="w">     </span><span class="n">three_arc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="mi">475</span><span class="p">,</span><span class="w"> </span><span class="mi">475</span><span class="p">,</span><span class="w"> </span><span class="n">theta1</span><span class="o">=</span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="n">theta2</span><span class="o">=</span><span class="mi">158</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span>
<span class="w">                     </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="w">     </span><span class="n">center_outer_arc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">422.5</span><span class="p">),</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="n">theta1</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span><span class="w"> </span><span class="n">theta2</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="w">                            </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="w">     </span><span class="n">center_inner_arc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">422.5</span><span class="p">),</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="n">theta1</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span><span class="w"> </span><span class="n">theta2</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="w">                            </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="w">     </span><span class="n">court_elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">hoop</span><span class="p">,</span><span class="w"> </span><span class="n">backboard</span><span class="p">,</span><span class="w"> </span><span class="n">outer_box</span><span class="p">,</span><span class="w"> </span><span class="n">inner_box</span><span class="p">,</span><span class="w"> </span><span class="n">top_free_throw</span><span class="p">,</span>
<span class="w">                       </span><span class="n">bottom_free_throw</span><span class="p">,</span><span class="w"> </span><span class="n">restricted</span><span class="p">,</span><span class="w"> </span><span class="n">corner_three_a</span><span class="p">,</span>
<span class="w">                       </span><span class="n">corner_three_b</span><span class="p">,</span><span class="w"> </span><span class="n">three_arc</span><span class="p">,</span><span class="w"> </span><span class="n">center_outer_arc</span><span class="p">,</span>
<span class="w">                       </span><span class="n">center_inner_arc</span><span class="p">]</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="n">outer_lines</span><span class="p">:</span>
<span class="w">         </span><span class="n">outer_lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">((</span><span class="o">-</span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">47.5</span><span class="p">),</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">470</span><span class="p">,</span><span class="w"> </span><span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="w">         </span><span class="n">court_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outer_lines</span><span class="p">)</span>

<span class="w">     </span><span class="k">for</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">court_elements</span><span class="p">:</span>
<span class="w">         </span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

<span class="w">     </span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>
<span class="w">     </span><span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([])</span>
<span class="w">     </span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
<span class="w">     </span><span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">ax</span>
</code></pre></div>

<p>Write a function for acquiring each player's picture. This isn't essential, but it makes things look nicer. This function takes a playerID number and the amount to zoom in on an image as the inputs. It by default places the image at the location 500,500.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">acquire_playerPic</span><span class="p">(</span><span class="n">PlayerID</span><span class="p">,</span><span class="w"> </span><span class="n">zoom</span><span class="p">,</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="mi">500</span><span class="p">)):</span>
<span class="w">     </span><span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span><span class="w">  </span><span class="n">offsetbox</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">osb</span>
<span class="w">     </span><span class="kn">import</span><span class="w"> </span><span class="nn">urllib</span>
<span class="w">     </span><span class="n">pic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">urllib</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="s2">&quot;http://stats.nba.com/media/players/230x185/&quot;</span><span class="o">+</span><span class="n">PlayerID</span><span class="o">+</span><span class="s2">&quot;.png&quot;</span><span class="p">,</span><span class="n">PlayerID</span><span class="o">+</span><span class="s2">&quot;.png&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="n">player_pic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">pic</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="w">     </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">osb</span><span class="o">.</span><span class="n">OffsetImage</span><span class="p">(</span><span class="n">player_pic</span><span class="p">,</span><span class="w"> </span><span class="n">zoom</span><span class="p">)</span>
<span class="w">     </span><span class="c1">#img.set_offset(offset)</span>
<span class="w">     </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">osb</span><span class="o">.</span><span class="n">AnnotationBbox</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">offset</span><span class="p">,</span><span class="n">xycoords</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="n">pad</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">box_alignment</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">img</span>
</code></pre></div>

<p>Here is where things get a little complicated. Below I write a function that divides the shooting data into a 25x25 matrix. Each shot taken within the xy coordinates encompassed by a given bin counts towards the shot count in that bin. In this way, the method I am using here is very similar to my previous hexbins (circles). So the difference just comes down to I present the data rather than how I preprocess it.</p>
<p>This function takes a dataframe with a vector of shot locations in the X plane, a vector with shot locations in the Y plane, a vector with shot type (2 pointer or 3 pointer), and a vector with ones for made shots and zeros for missed shots. The function by default bins the data into a 25x25 matrix, but the number of bins is editable. The 25x25 bins are then expanded to encompass a 500x500 space.</p>
<p>The output is a dictionary containing matrices for shots made, attempted, and points scored in each bin location. The dictionary also has the player's ID number.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">shooting_matrices</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">25</span><span class="p">):</span>
<span class="w">     </span><span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">floor</span>

<span class="w">     </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SHOT_TYPE2&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SHOT_TYPE&#39;</span><span class="p">]]</span><span class="w"> </span><span class="c1">#create a vector with whether the shot is a 2 or 3 pointer</span>
<span class="w">     </span><span class="n">points_matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">bins</span><span class="p">,</span><span class="n">bins</span><span class="p">))</span><span class="w"> </span><span class="c1">#create a matrix to fill with shooting data.</span>

<span class="w">     </span><span class="n">shot_attempts</span><span class="p">,</span><span class="w"> </span><span class="n">xtest</span><span class="p">,</span><span class="w"> </span><span class="n">ytest</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plt</span><span class="o">.</span><span class="n">hist2d</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;LOC_Y&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mf">425.1</span><span class="p">][</span><span class="s1">&#39;LOC_X&#39;</span><span class="p">],</span><span class="w"> </span><span class="c1">#use histtd to bin the data. These are attempts</span>
<span class="w">                                                 </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;LOC_Y&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mf">425.1</span><span class="p">][</span><span class="s1">&#39;LOC_Y&#39;</span><span class="p">],</span>
<span class="w">                                                 </span><span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span><span class="nb">range</span><span class="o">=</span><span class="p">[[</span><span class="o">-</span><span class="mi">250</span><span class="p">,</span><span class="mi">250</span><span class="p">],[</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="mi">400</span><span class="p">]]);</span><span class="w"> </span><span class="c1">#i limit the range of the bins because I don&#39;t care about super far away shots and I want the bins standardized across players</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="w">     </span><span class="n">shot_made</span><span class="p">,</span><span class="w"> </span><span class="n">xtest2</span><span class="p">,</span><span class="w"> </span><span class="n">ytest2</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plt</span><span class="o">.</span><span class="n">hist2d</span><span class="p">(</span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;LOC_Y&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mf">425.1</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SHOT_MADE_FLAG&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)][</span><span class="s1">&#39;LOC_X&#39;</span><span class="p">],</span><span class="w"> </span><span class="c1">#again use hist 2d to bin made shots</span>
<span class="w">                                     </span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;LOC_Y&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mf">425.1</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SHOT_MADE_FLAG&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)][</span><span class="s1">&#39;LOC_Y&#39;</span><span class="p">],</span>
<span class="w">                                     </span><span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span><span class="nb">range</span><span class="o">=</span><span class="p">[[</span><span class="o">-</span><span class="mi">250</span><span class="p">,</span><span class="mi">250</span><span class="p">],[</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="mi">400</span><span class="p">]]);</span>
<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="w">     </span><span class="n">differy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ytest</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="c1">#get the leading yedge</span>
<span class="w">     </span><span class="n">differx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xtest</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="c1">#get the leading xedge</span>
<span class="w">     </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="p">,(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;LOC_X&#39;</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;LOC_Y&#39;</span><span class="p">])):</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">-</span><span class="mi">250</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">-</span><span class="mf">25.1</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">400</span><span class="p">:</span><span class="w"> </span><span class="k">continue</span>
<span class="w">         </span><span class="n">points_matrix</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">250</span><span class="p">,</span><span class="n">differx</span><span class="p">))),</span><span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="mi">25</span><span class="p">,</span><span class="n">differy</span><span class="p">)))]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SHOT_MADE_FLAG&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SHOT_TYPE2&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
<span class="w">         </span><span class="c1">#loop through all the shots and tally the points made in each bin location.</span>

<span class="w">     </span><span class="n">shot_attempts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">shot_attempts</span><span class="p">,</span><span class="mi">500</span><span class="o">/</span><span class="n">bins</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">#repeat the shot attempts matrix so that it fills all xy points</span>
<span class="w">     </span><span class="n">shot_attempts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">shot_attempts</span><span class="p">,</span><span class="mi">500</span><span class="o">/</span><span class="n">bins</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="w">     </span><span class="n">shot_made</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">shot_made</span><span class="p">,</span><span class="mi">500</span><span class="o">/</span><span class="n">bins</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">#repeat shot made so that it fills all xy points (rather than just bin locations)</span>
<span class="w">     </span><span class="n">shot_made</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">shot_made</span><span class="p">,</span><span class="mi">500</span><span class="o">/</span><span class="n">bins</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="w">     </span><span class="n">points_matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">points_matrix</span><span class="p">,</span><span class="mi">500</span><span class="o">/</span><span class="n">bins</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">#again repeat with points</span>
<span class="w">     </span><span class="n">points_matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">points_matrix</span><span class="p">,</span><span class="mi">500</span><span class="o">/</span><span class="n">bins</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;attempted&#39;</span><span class="p">:</span><span class="n">shot_attempts</span><span class="p">,</span><span class="s1">&#39;made&#39;</span><span class="p">:</span><span class="n">shot_made</span><span class="p">,</span><span class="s1">&#39;points&#39;</span><span class="p">:</span><span class="n">points_matrix</span><span class="p">,</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;PLAYER_ID&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">])}</span>
</code></pre></div>

<p>Below I load the league average data. I also have the code that I used to originally download the data and to preprocess it.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>

<span class="w"> </span><span class="c1">#df = aqcuire_shootingData(&#39;0&#39;,&#39;2015-16&#39;) #here is how I acquired data about every shot taken in 2015-16</span>
<span class="w"> </span><span class="c1">#df2 = pd.read_pickle(&#39;nba_shots_201516_2016_Apr_27.pkl&#39;) #here is how you can read all the league shot data</span>
<span class="w"> </span><span class="c1">#league_shotDict = shooting_matrices(df2) #turn the shot data into the shooting matrix</span>
<span class="w"> </span><span class="c1">#pickle.dump(league_shotDict, open(&#39;league_shotDictionary_2016.pkl&#39;, &#39;wb&#39; )) #save the data</span>

<span class="w"> </span><span class="c1">#I should make it so this is the plot size by default, but people can change it if they want. this would be slower.</span>
<span class="w"> </span><span class="n">league_shotDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;league_shotDictionary_2016.pkl&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;rb&#39;</span><span class="w"> </span><span class="p">))</span><span class="w"> </span><span class="c1">#read in the a precreated shot chart for the entire league</span>
</code></pre></div>

<p>I really like playing with the different color maps, so here is a new color map I created for these shot charts.</p>
<div class="highlight"><pre><span></span><code> cmap = plt.cm.CMRmap_r #start with the CMR map in reverse.

 maxer = 0.6 #max value to take in the CMR map

 the_range = np.arange(0,maxer+0.1,maxer/4) #divide the map into 4 values
 the_range2 = [0.0,0.25,0.5,0.75,1.0] #or use these values

 mapper = [cmap(x) for x in the_range] #grab color values for this dictionary
 cdict = {&#39;red&#39;:[],&#39;green&#39;:[],&#39;blue&#39;:[]} #fill teh values into a color dictionary
 for item,place in zip(mapper,the_range2):
     cdict[&#39;red&#39;].append((place,item[0], item[0]))
     cdict[&#39;green&#39;].append((place,item[1],item[1]))
     cdict[&#39;blue&#39;].append((place,item[2],item[2]))

 mymap = mpl.colors.LinearSegmentedColormap(&#39;my_colormap&#39;, cdict, 1024) #linearly interpolate between color values
</code></pre></div>

<p>Below, I write a function for creating the nba shot charts. The function takes a dictionary with martrices for shots attempted, made, and points scored. The matrices should be 500x500. By default, the shot chart depicts the number of shots taken across locations, but it can also depict the number of shots made, field goal percentage, and point scored across locations.</p>
<p>The function uses a gaussian kernel with standard deviation of 5 to smooth the data (make it look pretty). Again, this is editable. By default the function plots a players raw data, but it will plot how a player compares to league average if the input includes a matrix of league average data.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">create_shotChart</span><span class="p">(</span><span class="n">shotDict</span><span class="p">,</span><span class="n">fig_type</span><span class="o">=</span><span class="s1">&#39;attempted&#39;</span><span class="p">,</span><span class="n">smooth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">league_shotDict</span><span class="o">=</span><span class="p">[],</span><span class="n">mymap</span><span class="o">=</span><span class="n">mymap</span><span class="p">):</span>
<span class="w">     </span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.ndimage.filters</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">gaussian_filter</span>

<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="n">fig_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;fg&#39;</span><span class="p">:</span><span class="w"> </span><span class="c1">#how to treat the data if depicting fg percentage</span>
<span class="w">         </span><span class="n">interest_measure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shotDict</span><span class="p">[</span><span class="s1">&#39;made&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">shotDict</span><span class="p">[</span><span class="s1">&#39;attempted&#39;</span><span class="p">]</span>
<span class="w">         </span><span class="c1">#interest_measure[np.isnan(interest_measure)] = np.nanmean(interest_measure)</span>
<span class="w">         </span><span class="c1">#interest_measure = np.nan_to_num(interest_measure) #replace places where divide by 0 with a 0</span>
<span class="w">     </span><span class="k">else</span><span class="p">:</span>
<span class="w">         </span><span class="n">interest_measure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shotDict</span><span class="p">[</span><span class="n">fig_type</span><span class="p">]</span><span class="w"> </span><span class="c1">#else take the data from dictionary.</span>

<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="n">league_shotDict</span><span class="p">:</span><span class="w"> </span><span class="c1">#if we have league data, we have to select the relevant league data.</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="n">fig_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;fg&#39;</span><span class="p">:</span>
<span class="w">             </span><span class="n">league</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">league_shotDict</span><span class="p">[</span><span class="s1">&#39;made&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">league_shotDict</span><span class="p">[</span><span class="s1">&#39;attempted&#39;</span><span class="p">]</span>
<span class="w">             </span><span class="n">league</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">league</span><span class="p">)</span>
<span class="w">             </span><span class="n">interest_measure</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="o">-</span><span class="n">league</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)]</span><span class="w"> </span><span class="c1">#compare league data and invidual player&#39;s data</span>
<span class="w">             </span><span class="n">interest_measure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span><span class="w"> </span><span class="c1">#replace places where divide by 0 with a 0</span>
<span class="w">             </span><span class="n">maxer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span><span class="w"> </span><span class="c1">#min and max values for color map</span>
<span class="w">             </span><span class="n">minner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="o">-</span><span class="w"> </span><span class="mf">1.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span>
<span class="w">         </span><span class="k">else</span><span class="p">:</span>
<span class="w">             </span><span class="n">player_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interest_measure</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">x</span><span class="p">[::</span><span class="mi">20</span><span class="p">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">player_shotDict</span><span class="p">[</span><span class="n">fig_type</span><span class="p">][::</span><span class="mi">20</span><span class="p">]])</span><span class="w"> </span><span class="c1">#standardize data before comparing</span>
<span class="w">             </span><span class="n">league_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">league_shotDict</span><span class="p">[</span><span class="n">fig_type</span><span class="p">]</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">x</span><span class="p">[::</span><span class="mi">20</span><span class="p">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">league_shotDict</span><span class="p">[</span><span class="n">fig_type</span><span class="p">][::</span><span class="mi">20</span><span class="p">]])</span><span class="w"> </span><span class="c1">#standardize league data</span>
<span class="w">             </span><span class="n">interest_measure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">player_percent</span><span class="o">-</span><span class="n">league_percent</span><span class="w"> </span><span class="c1">#compare league and individual data</span>
<span class="w">             </span><span class="n">maxer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span><span class="w"> </span><span class="c1">#compute max and min values for color map</span>
<span class="w">             </span><span class="n">minner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span>

<span class="w">         </span><span class="n">cmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;bwr&#39;</span><span class="w"> </span><span class="c1">#use bwr color map if comparing to league average</span>
<span class="w">         </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;&lt;Avg&#39;</span><span class="p">,</span><span class="s1">&#39;Avg&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&gt;Avg&#39;</span><span class="p">]</span><span class="w"> </span><span class="c1">#color map legend label</span>

<span class="w">     </span><span class="k">else</span><span class="p">:</span>
<span class="w">         </span><span class="n">cmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mymap</span><span class="w"> </span><span class="c1">#else use my color map</span>
<span class="w">         </span><span class="n">interest_measure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span><span class="w"> </span><span class="c1">#replace places where divide by 0 with a 0</span>
<span class="w">         </span><span class="n">maxer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">)</span><span class="w"> </span><span class="c1">#compute max for colormap</span>
<span class="w">         </span><span class="n">minner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">         </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;Less&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;More&#39;</span><span class="p">]</span><span class="w"> </span><span class="c1">#color map legend label</span>

<span class="w">     </span><span class="n">ppr_smooth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gaussian_filter</span><span class="p">(</span><span class="n">interest_measure</span><span class="p">,</span><span class="n">smooth</span><span class="p">)</span><span class="w"> </span><span class="c1">#smooth the data</span>

<span class="w">     </span><span class="n">fig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="c1">#(12,7)</span>
<span class="w">     </span><span class="n">ax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">])</span><span class="w"> </span><span class="c1">#where to place the plot within the figure</span>
<span class="w">     </span><span class="n">draw_court</span><span class="p">(</span><span class="n">outer_lines</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="w"> </span><span class="c1">#draw court</span>
<span class="w">     </span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">250</span><span class="p">,</span><span class="mi">250</span><span class="p">)</span>
<span class="w">     </span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">25</span><span class="p">)</span>

<span class="w">     </span><span class="n">ax2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">(),</span><span class="w"> </span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="w">     </span><span class="n">colrange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">minner</span><span class="p">,</span><span class="w"> </span><span class="n">vmax</span><span class="o">=</span><span class="n">maxer</span><span class="p">,</span><span class="w"> </span><span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="w"> </span><span class="c1">#standardize color range</span>
<span class="w">     </span><span class="n">ax2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ppr_smooth</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="n">norm</span><span class="o">=</span><span class="n">colrange</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span><span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span><span class="w"> </span><span class="c1">#plot data</span>
<span class="w">     </span><span class="n">ax2</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>
<span class="w">     </span><span class="n">ax2</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([])</span>
<span class="w">     </span><span class="n">ax2</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
<span class="w">     </span><span class="n">ax2</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">)</span>
<span class="w">     </span><span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">     </span><span class="n">ax2</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([]);</span>

<span class="w">     </span><span class="n">ax3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.92</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.02</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">])</span><span class="w"> </span><span class="c1">#place colormap legend</span>
<span class="w">     </span><span class="n">cb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpl</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">ColorbarBase</span><span class="p">(</span><span class="n">ax3</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="w"> </span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="n">fig_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;fg&#39;</span><span class="p">:</span><span class="w"> </span><span class="c1">#colormap label</span>
<span class="w">         </span><span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Field Goal Percentage&#39;</span><span class="p">)</span>
<span class="w">     </span><span class="k">else</span><span class="p">:</span>
<span class="w">         </span><span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Shots &#39;</span><span class="o">+</span><span class="n">fig_type</span><span class="p">)</span>

<span class="w">     </span><span class="n">cb</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">1.0</span><span class="p">])</span>
<span class="w">     </span><span class="n">ax3</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">label</span><span class="p">,</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">);</span>

<span class="w">     </span><span class="n">zoom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">12.0</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="c1">#place player pic</span>
<span class="w">     </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acquire_playerPic</span><span class="p">(</span><span class="n">player_shotDict</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span><span class="w"> </span><span class="n">zoom</span><span class="p">)</span>
<span class="w">     </span><span class="n">ax2</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

<span class="w">     </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">ax</span>
</code></pre></div>

<p>Alright, thats that. Now lets create some plots. I am a t-wolves fan, so I will plot data from Karl Anthony Towns.</p>
<p>First, here is the default plot - attempts.</p>
<div class="highlight"><pre><span></span><code> df = aqcuire_shootingData(&#39;1626157&#39;,&#39;2015-16&#39;)
 player_shotDict = shooting_matrices(df)
 create_shotChart(player_shotDict);
</code></pre></div>

<p><img src="https://danvatterott.com/images/nba_shot_charts/attempts1.png" /></p>
<p>Here's KAT's shots made</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nx">df</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">aqcuire_shootingData</span><span class="p">(</span><span class="err">&#39;</span><span class="mi">1626157</span><span class="sc">&#39;,&#39;</span><span class="mi">2015</span><span class="o">-</span><span class="mi">16</span><span class="err">&#39;</span><span class="p">)</span>
<span class="w"> </span><span class="nx">player_shotDict</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">shooting_matrices</span><span class="p">(</span><span class="nx">df</span><span class="p">)</span>
<span class="w"> </span><span class="nx">create_shotChart</span><span class="p">(</span><span class="nx">player_shotDict</span><span class="p">,</span><span class="nx">fig_type</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">made</span><span class="err">&#39;</span><span class="p">);</span>
</code></pre></div>

<p><img src="https://danvatterott.com/images/nba_shot_charts/made1.png" /></p>
<p>Here's field goal percentage. I don't like this one too much. It's hard to use similar scales for attempts and field goal percentage even though I'm using standard deviations rather than absolute scales.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nx">df</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">aqcuire_shootingData</span><span class="p">(</span><span class="err">&#39;</span><span class="mi">1626157</span><span class="sc">&#39;,&#39;</span><span class="mi">2015</span><span class="o">-</span><span class="mi">16</span><span class="err">&#39;</span><span class="p">)</span>
<span class="w"> </span><span class="nx">player_shotDict</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">shooting_matrices</span><span class="p">(</span><span class="nx">df</span><span class="p">)</span>
<span class="w"> </span><span class="nx">create_shotChart</span><span class="p">(</span><span class="nx">player_shotDict</span><span class="p">,</span><span class="w"> </span><span class="nx">fig_type</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">fg</span><span class="err">&#39;</span><span class="p">);</span>
</code></pre></div>

<p><img src="https://danvatterott.com/images/nba_shot_charts/fg1.png" /></p>
<p>Here's points across the court.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nx">df</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">aqcuire_shootingData</span><span class="p">(</span><span class="err">&#39;</span><span class="mi">1626157</span><span class="sc">&#39;,&#39;</span><span class="mi">2015</span><span class="o">-</span><span class="mi">16</span><span class="err">&#39;</span><span class="p">)</span>
<span class="w"> </span><span class="nx">player_shotDict</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">shooting_matrices</span><span class="p">(</span><span class="nx">df</span><span class="p">)</span>
<span class="w"> </span><span class="nx">create_shotChart</span><span class="p">(</span><span class="nx">player_shotDict</span><span class="p">,</span><span class="w"> </span><span class="nx">fig_type</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">points</span><span class="err">&#39;</span><span class="p">);</span>
</code></pre></div>

<p><img src="https://danvatterott.com/images/nba_shot_charts/points1.png" /></p>
<p>Here's how KAT's attempts compare to the league average. You can see the twolve's midrange heavy offense.</p>
<div class="highlight"><pre><span></span><code> df = aqcuire_shootingData(&#39;1626157&#39;,&#39;2015-16&#39;)
 player_shotDict = shooting_matrices(df)
 create_shotChart(player_shotDict, league_shotDict=league_shotDict);
</code></pre></div>

<p><img src="https://danvatterott.com/images/nba_shot_charts/attempts2.png" /></p>
<p>How KAT's shots made compares to league average.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nx">df</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">aqcuire_shootingData</span><span class="p">(</span><span class="err">&#39;</span><span class="mi">1626157</span><span class="sc">&#39;,&#39;</span><span class="mi">2015</span><span class="o">-</span><span class="mi">16</span><span class="err">&#39;</span><span class="p">)</span>
<span class="w"> </span><span class="nx">player_shotDict</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">shooting_matrices</span><span class="p">(</span><span class="nx">df</span><span class="p">)</span>
<span class="w"> </span><span class="nx">create_shotChart</span><span class="p">(</span><span class="nx">player_shotDict</span><span class="p">,</span><span class="w"> </span><span class="nx">fig_type</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">made</span><span class="err">&#39;</span><span class="p">,</span><span class="nx">league_shotDict</span><span class="p">=</span><span class="nx">league_shotDict</span><span class="p">);</span>
</code></pre></div>

<p><img src="https://danvatterott.com/images/nba_shot_charts/made2.png" /></p>
<p>How KAT's field goal percentage compares to league average. Again, the scale on these is not too good.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nx">df</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">aqcuire_shootingData</span><span class="p">(</span><span class="err">&#39;</span><span class="mi">1626157</span><span class="sc">&#39;,&#39;</span><span class="mi">2015</span><span class="o">-</span><span class="mi">16</span><span class="err">&#39;</span><span class="p">)</span>
<span class="w"> </span><span class="nx">player_shotDict</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">shooting_matrices</span><span class="p">(</span><span class="nx">df</span><span class="p">)</span>
<span class="w"> </span><span class="nx">create_shotChart</span><span class="p">(</span><span class="nx">player_shotDict</span><span class="p">,</span><span class="w"> </span><span class="nx">fig_type</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">fg</span><span class="err">&#39;</span><span class="p">,</span><span class="nx">league_shotDict</span><span class="p">=</span><span class="nx">league_shotDict</span><span class="p">);</span>
</code></pre></div>

<p><img src="https://danvatterott.com/images/nba_shot_charts/fg2.png" /></p>
<p>And here is how KAT's points compare to league average.</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nx">df</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">aqcuire_shootingData</span><span class="p">(</span><span class="err">&#39;</span><span class="mi">1626157</span><span class="sc">&#39;,&#39;</span><span class="mi">2015</span><span class="o">-</span><span class="mi">16</span><span class="err">&#39;</span><span class="p">)</span>
<span class="w"> </span><span class="nx">player_shotDict</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">shooting_matrices</span><span class="p">(</span><span class="nx">df</span><span class="p">)</span>
<span class="w"> </span><span class="nx">create_shotChart</span><span class="p">(</span><span class="nx">player_shotDict</span><span class="p">,</span><span class="w"> </span><span class="nx">fig_type</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">points</span><span class="err">&#39;</span><span class="p">,</span><span class="nx">league_shotDict</span><span class="p">=</span><span class="nx">league_shotDict</span><span class="p">);</span>
</code></pre></div>

<p><img src="https://danvatterott.com/images/nba_shot_charts/points2.png" /></p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Dan Vatterott
    </span>
  </span>
<time datetime="2016-05-13T11:08:22-04:00" pubdate>Fri 13 May 2016</time>  <span class="categories">
    <a class='category' href='https://danvatterott.com/category/nba.html'>nba</a>
  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">


<!-- <section> -->
    <section style="max-width: fit-content; margin-inline: auto;">

            <span class="fa-stack fa-lg">
                <a href="mailto:dvatterott@gmail.com"><i class="fa fa-envelope fa-1x"></i></a>
            </span>
            <span class="fa-stack fa-lg">
                <a href="http://www.linkedin.com/in/dan-vatterott"><i class="fa fa-linkedin fa-1x"></i></a>
            </span>

            <span class="fa-stack fa-lg">
                <a href="https://twitter.com/dvatterott"><i class="fa fa-twitter fa-1x"></i></a>
            </span>

            <span class="fa-stack fa-lg">
                <a href="https://github.com/dvatterott"><i class="fa fa-github fa-1x"></i></a>
            </span>
            <span class="fa-stack fa-lg">
                <a href="https://scholar.google.com/citations?hl=en&user=-S7mhDQAAAAJ&hl"><i class="fa fa-graduation-cap fa-1x"></i></a>
            </span>

            <!-- <h1>Social</h1>
                 <ul>
                 <li><a href="dvatterott@gmail.com" target="_blank">email</a></li>
                 <li><a href="http://www.linkedin.com/in/dan-vatterott" target="_blank">linkedin</a></li>
                 <li><a href="https://twitter.com/dvatterott" target="_blank">twitter</a></li>
                 <li><a href="https://github.com/dvatterott" target="_blank">github</a></li>
                 <li><a href="https://scholar.google.com/citations?hl=en&user=-S7mhDQAAAAJ&hl" target="_blank">google-scholar</a></li>


                 </ul> -->
    </section>


  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="https://danvatterott.com/modeling-the-relative-speed-of-hot-wheels-cars.html">Modeling the relative speed of Hot Wheels Cars</a>
      </li>
      <li class="post">
          <a href="https://danvatterott.com/data-onboarding-checklist.html">Data Onboarding Checklist</a>
      </li>
      <li class="post">
          <a href="https://danvatterott.com/posting-collections-as-hive-tables.html">Posting Collections as Hive Tables</a>
      </li>
      <li class="post">
          <a href="https://danvatterott.com/balancing-model-weights-in-pyspark.html">Balancing Model Weights in PySpark</a>
      </li>
      <li class="post">
          <a href="https://danvatterott.com/creating-a-cdf-in-pyspark.html">Creating a CDF in PySpark</a>
      </li>
    </ul>
  </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2015&ndash;2025  Dan Vatterott &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="https://danvatterott.com/theme/js/modernizr-2.0.js"></script>
  <script src="https://danvatterott.com/theme/js/ender.js"></script>
  <script src="https://danvatterott.com/theme/js/octopress.js" type="text/javascript"></script>
  <script type="text/javascript">
    var disqus_shortname = 'danvatterott';
    var disqus_identifier = '/nba-shot-charts-updated.html';
    var disqus_url = 'https://danvatterott.com/nba-shot-charts-updated.html';
    var disqus_title = 'NBA Shot Charts: Updated';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
</body>
</html>